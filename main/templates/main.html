{% extends 'base.html' %}
{% load static %}
{% block content %}

<section class="mb-8 rounded-2xl bg-gray-900 text-white p-6">
  <h1 class="text-3xl font-semibold">Gollective</h1>
  <p class="text-white/70">From goals to collectibles</p>
  <div class="mt-6 flex flex-wrap gap-3">
    <a href="?filter=all" class="px-4 py-2 rounded-lg text-sm {% if request.GET.filter == 'my' %}bg-white text-gray-900{% else %}bg-gray-800{% endif %}">All</a>
    <a href="?filter=my" class="px-4 py-2 rounded-lg text-sm {% if request.GET.filter == 'my' %}bg-gray-800{% else %}bg-white text-gray-900{% endif %}">My</a>
    <a href="{% url 'main:add_product' %}" class="px-4 py-2 rounded-lg bg-white text-gray-900 text-sm">+ Add Product</a>
  </div>
</section>

{% if not products %}
  <div class="bg-white border border-gray-200 rounded-2xl p-12 text-center">
    <div class="w-32 h-32 mx-auto mb-4">
      <img src="{% static 'image/product-not-found.png' %}" alt="No products" class="w-full h-full object-contain">
    </div>
    <h3 class="text-lg font-semibold mb-2">Belum ada produk</h3>
    <p class="text-gray-500 mb-6">Tambah produk pertamamu sekarang.</p>
    <a href="{% url 'main:add_product' %}" class="inline-flex px-4 py-2 rounded-lg bg-gray-900 text-white">Add Product</a>
  </div>
{% else %}
  <section class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
    {% for p in products %}
    <article class="group overflow-hidden rounded-2xl bg-white border border-gray-200 shadow-sm hover:shadow-md transition">
      {% if p.thumbnail %}
        <div class="aspect-[4/3] overflow-hidden bg-gray-100">
          <img src="{{ p.thumbnail }}" alt="{{ p.name }}" class="h-full w-full object-cover group-hover:scale-105 transition" />
        </div>
      {% endif %}
      <div class="p-4">
        <h3 class="font-semibold leading-tight">{{ p.name }}</h3>
        <p class="text-sm text-gray-500">{{ p.club_name }} {{ p.season }}</p>
        <p class="mt-2 text-sm text-gray-600 line-clamp-2">{{ p.description }}</p>
        <div class="mt-3 flex items-center justify-between">
          <span class="font-semibold">Rp {{ p.price }}</span>
          <a href="{% url 'main:show_product' p.id %}" class="text-sm px-3 py-1.5 rounded-lg border border-gray-300 hover:bg-gray-50">Detail</a>
        </div>

        {% if user.is_authenticated and p.user == user %}
        <div class="mt-3 flex items-center gap-2">
          <a href="{% url 'main:edit_product' p.id %}" class="text-sm px-3 py-1.5 rounded-lg border border-gray-300 hover:bg-gray-50">Edit</a>
          <a href="{% url 'main:delete_product' p.id %}" class="text-sm px-3 py-1.5 rounded-lg border border-red-300 text-red-600 hover:bg-red-50">Delete</a>
        </div>
        {% endif %}
      </div>
    </article>
    {% endfor %}
  </section>
{% endif %}
{% endblock content %}
